<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Homework Review &mdash; Code Fellows F2 Python, March-April 2015</title>
    
    <link rel="stylesheet" href="_static/pyramid.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Code Fellows F2 Python, March-April 2015" href="index.html" />
    <link rel="next" title="Session Six (Tentative): Intro to Object Oriented Programming" href="session06.html" />
    <link rel="prev" title="Session Four: Sequences, While Loops, Strings, Input" href="session04.html" />
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Neuton&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Nobile:regular,italic,bold,bolditalic&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->

  </head>
  <body>
<div class="header">
  <div class="logo">
    <a href="index.html">
      <img class="logo" src="_static/cf_logo.png" alt="Logo"/>
      <p>Code Fellows</p>
    </a>
  </div>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="session06.html" title="Session Six (Tentative): Intro to Object Oriented Programming"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="session04.html" title="Session Four: Sequences, While Loops, Strings, Input"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">F2 Python</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <hr class="docutils" />
<div class="section" id="homework-review">
<h1>Homework Review<a class="headerlink" href="#homework-review" title="Permalink to this headline">¶</a></h1>
<ul class="left simple">
<li>HW 5: Customizing Bash</li>
<li>HW 6: Mathematical Series</li>
<li>HW 7: DNA Counting</li>
<li>HW 11: Mail Room Madness</li>
</ul>
<p>Ask for volunteers on Slack</p>
</div>
<div class="section" id="today-s-puzzle-trigrams">
<h1>Today&#8217;s Puzzle: Trigrams<a class="headerlink" href="#today-s-puzzle-trigrams" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="id1">
<h1>Today&#8217;s Puzzle: Trigrams<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>N-grams are a way to study word associations</p>
<p><a class="reference external" href="https://books.google.com/ngrams">https://books.google.com/ngrams</a></p>
<ul>
<li><p class="first">Coding Kata 14 - Dave Thomas</p>
<p><a class="reference external" href="http://codekata.com/kata/kata14-tom-swift-under-the-milkwood/">http://codekata.com/kata/kata14-tom-swift-under-the-milkwood/</a></p>
<p>and in this doc:</p>
<p><a class="reference external" href="http://codefellows.github.io/sea-c42-python/supplements/kata_fourteen.html">http://codefellows.github.io/sea-c42-python/supplements/kata_fourteen.html</a></p>
</li>
<li><p class="first">Use &#8220;The Adventures of Sherlock Holmes&#8221; as input:</p>
<p><a class="reference external" href="http://codefellows.github.io/sea-c15-python/_downloads/sherlock_small.txt">http://codefellows.github.io/sea-c15-python/_downloads/sherlock_small.txt</a></p>
</li>
</ul>
<ul class="simple">
<li>Our task today: read in the words from a large text file,
create a dictionary of trigrams.</li>
<li>Write pseudo code and create a design.</li>
<li>Use dictionaries, exceptions, file reading/writing.</li>
</ul>
</div>
<div class="section" id="dictionaries-and-sets">
<h1>Dictionaries and Sets<a class="headerlink" href="#dictionaries-and-sets" title="Permalink to this headline">¶</a></h1>
<div class="section" id="dictionary">
<h2>Dictionary<a class="headerlink" href="#dictionary" title="Permalink to this headline">¶</a></h2>
<p>Python calls it a <tt class="docutils literal"><span class="pre">dict</span></tt></p>
<p>Other languages call it:</p>
<ul class="simple">
<li>dictionary</li>
<li>associative array</li>
<li>map</li>
<li>hash table</li>
<li>hash</li>
<li>key-value pair</li>
</ul>
</div>
<div class="section" id="dictionary-constructors">
<h2>Dictionary Constructors<a class="headerlink" href="#dictionary-constructors" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="p">{</span><span class="s">&#39;key1&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s">&#39;key2&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">}</span>
<span class="go">{&#39;key1&#39;: 3, &#39;key2&#39;: 5}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dict</span><span class="p">([(</span><span class="s">&#39;key1&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),(</span><span class="s">&#39;key2&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)])</span>
<span class="go">{&#39;key1&#39;: 3, &#39;key2&#39;: 5}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dict</span><span class="p">(</span><span class="n">key1</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">key2</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="go">{&#39;key1&#39;: 3, &#39;key2&#39;: 5}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="s">&#39;key1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="s">&#39;key2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>
<span class="go">{&#39;key1&#39;: 3, &#39;key2&#39;: 5}</span>
</pre></div>
</div>
</div>
<div class="section" id="dictionary-indexing">
<h2>Dictionary Indexing<a class="headerlink" href="#dictionary-indexing" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Brian&#39;</span><span class="p">,</span> <span class="s">&#39;score&#39;</span><span class="p">:</span> <span class="mi">42</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="s">&#39;score&#39;</span><span class="p">]</span>
<span class="go">42</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span> <span class="s">&#39;zero&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">&#39;zero&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="s">&#39;non-existing key&#39;</span><span class="p">]</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">KeyError</span>: <span class="n">&#39;non-existing key&#39;</span>
</pre></div>
</div>
<p>Keys can be any <strong>immutable</strong> object:</p>
<ul class="simple">
<li>number</li>
<li>string</li>
<li>tuple</li>
</ul>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [325]: </span><span class="n">d</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;string&#39;</span>
<span class="gp">In [326]: </span><span class="n">d</span><span class="p">[</span><span class="mf">3.14</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;pi&#39;</span>
<span class="gp">In [327]: </span><span class="n">d</span><span class="p">[</span><span class="s">&#39;pi&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">3.14</span>
<span class="gp">In [328]: </span><span class="n">d</span><span class="p">[</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="p">]</span> <span class="o">=</span> <span class="s">&#39;a tuple key&#39;</span>
<span class="gp">In [329]: </span><span class="n">d</span><span class="p">[</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="s">&#39;a list key&#39;</span>
<span class="go">   TypeError: unhashable type: &#39;list&#39;</span>
</pre></div>
</div>
<p>Actually &#8211; any &#8220;hashable&#8221; type.</p>
<p>Hash functions convert arbitrarily large data to a small proxy (usually int)</p>
<div class="build container">
<p>Always return the same proxy for the same input</p>
<p>MD5, SHA, etc</p>
<p>Dictionaries hash the key to an integer proxy and use it to find the key
and value.</p>
<p>Key lookup is efficient because the hash function leads directly to a
bucket with very few keys (often just one)</p>
<p>What would happen if the proxy changed after storing a key?</p>
<p>Hashability requires immutability</p>
<p>Key lookup is very efficient</p>
<p>Same average time regardless of size</p>
</div>
<p>Note: Python name look-ups are implemented with dict &#8211; it&#8217;s highly optimized</p>
<div class="build container">
<p>Key to value:</p>
<ul class="simple">
<li>lookup is one way</li>
</ul>
<p>Value to key:</p>
<ul class="simple">
<li>requires visiting the whole dict</li>
</ul>
<p>If you need to check dict values often, create another dict or set</p>
<p>(up to you to keep them in sync)</p>
</div>
</div>
<div class="section" id="dictionary-ordering-not">
<h2>Dictionary Ordering (not)<a class="headerlink" href="#dictionary-ordering-not" title="Permalink to this headline">¶</a></h2>
<p>Dictionaries have no defined order</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [352]: </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;one&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;three&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">}</span>
<span class="gp">In [353]: </span><span class="n">d</span>
<span class="gh">Out[353]: </span><span class="go">{&#39;one&#39;: 1, &#39;three&#39;: 3, &#39;two&#39;: 2}</span>
<span class="gp">In [354]: </span><span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="gh">Out[354]: </span><span class="go">[&#39;three&#39;, &#39;two&#39;, &#39;one&#39;]</span>
</pre></div>
</div>
<div class="build container">
<p>You will be fooled by what you see into thinking that the order of pairs
can be relied on.</p>
<p>It cannot.</p>
</div>
</div>
<div class="section" id="dictionary-iterating">
<h2>Dictionary Iterating<a class="headerlink" href="#dictionary-iterating" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">for</span></tt>  iterates over the keys</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [15]: </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Brian&#39;</span><span class="p">,</span> <span class="s">&#39;score&#39;</span><span class="p">:</span> <span class="mi">42</span><span class="p">}</span>

<span class="gp">In [16]: </span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
<span class="gp">   ....: </span>    <span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="gp">   ....:</span>
<span class="go">score</span>
<span class="go">name</span>
</pre></div>
</div>
<p>(note the different order...)</p>
</div>
<div class="section" id="dict-keys-and-values">
<h2>dict keys and values<a class="headerlink" href="#dict-keys-and-values" title="Permalink to this headline">¶</a></h2>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [20]: </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Brian&#39;</span><span class="p">,</span> <span class="s">&#39;score&#39;</span><span class="p">:</span> <span class="mi">42</span><span class="p">}</span>

<span class="gp">In [21]: </span><span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="gh">Out[21]: </span><span class="go">[&#39;score&#39;, &#39;name&#39;]</span>

<span class="gp">In [22]: </span><span class="n">d</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
<span class="gh">Out[22]: </span><span class="go">[42, &#39;Brian&#39;]</span>

<span class="gp">In [23]: </span><span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<span class="gh">Out[23]: </span><span class="go">[(&#39;score&#39;, 42), (&#39;name&#39;, &#39;Brian&#39;)]</span>
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h2>dict keys and values<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>Iterating on everything</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [26]: </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Brian&#39;</span><span class="p">,</span> <span class="s">&#39;score&#39;</span><span class="p">:</span> <span class="mi">42</span><span class="p">}</span>

<span class="gp">In [27]: </span><span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<span class="gp">   ....: </span>    <span class="k">print</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">))</span>
<span class="gp">   ....:</span>
<span class="go">score: 42</span>
<span class="go">name: Brian</span>
</pre></div>
</div>
</div>
<div class="section" id="dictionary-performance">
<h2>Dictionary Performance<a class="headerlink" href="#dictionary-performance" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>indexing is fast and constant time: O(1)</li>
<li>Membership (<tt class="docutils literal"><span class="pre">x</span> <span class="pre">in</span> <span class="pre">s</span></tt>) constant time: O(1)</li>
<li>visiting all is proportional to n: O(n)</li>
<li>inserting is constant time: O(1)</li>
<li>deleting is constant time: O(1)</li>
</ul>
<p><a class="reference external" href="http://wiki.python.org/moin/TimeComplexity">http://wiki.python.org/moin/TimeComplexity</a></p>
</div>
<div class="section" id="other-dict-operations">
<h2>Other dict operations:<a class="headerlink" href="#other-dict-operations" title="Permalink to this headline">¶</a></h2>
<p>See them all here:</p>
<p><a class="reference external" href="https://docs.python.org/2/library/stdtypes.html#mapping-types-dict">https://docs.python.org/2/library/stdtypes.html#mapping-types-dict</a></p>
<p>Is it in there?</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [5]: </span><span class="n">d</span>
<span class="gh">Out[5]: </span><span class="go">{&#39;that&#39;: 7, &#39;this&#39;: 5}</span>

<span class="gp">In [6]: </span><span class="s">&#39;that&#39;</span> <span class="ow">in</span> <span class="n">d</span>
<span class="gh">Out[6]: </span><span class="go">True</span>

<span class="gp">In [7]: </span><span class="s">&#39;this&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">d</span>
<span class="gh">Out[7]: </span><span class="go">False</span>
</pre></div>
</div>
<p>Membership is on the keys.</p>
<p>(like indexing)</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [9]: </span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;this&#39;</span><span class="p">)</span>
<span class="gh">Out[9]: </span><span class="go">5</span>
</pre></div>
</div>
<div class="build container">
<p>But you can specify a default</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [11]: </span><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">u&#39;something&#39;</span><span class="p">,</span> <span class="s">u&#39;a default&#39;</span><span class="p">)</span>
<span class="gh">Out[11]: </span><span class="go">u&#39;a default&#39;</span>
</pre></div>
</div>
<p>Never raises an Exception (default default is None)</p>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [13]: </span><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
<span class="gp">   ....: </span>    <span class="k">print</span> <span class="n">item</span>
<span class="gp">   ....:</span>
<span class="go">(&#39;this&#39;, 5)</span>
<span class="go">(&#39;that&#39;, 7)</span>
<span class="gp">In [15]: </span><span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
<span class="gp">   ....: </span>    <span class="k">print</span> <span class="n">key</span>
<span class="gp">   ....:</span>
<span class="go">this</span>
<span class="go">that</span>
<span class="gp">In [16]: </span><span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
<span class="gp">   ....: </span>    <span class="k">print</span> <span class="n">val</span>
<span class="gp">   ....:</span>
<span class="go">5</span>
<span class="go">7</span>
</pre></div>
</div>
<p>the <tt class="docutils literal"><span class="pre">iter*</span></tt> methods <em>don&#8217;t actually create the lists</em>.</p>
<p>gets the value at a given key while removing it</p>
<div class="build container">
<p>Pop just a key</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [19]: </span><span class="n">d</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s">&#39;this&#39;</span><span class="p">)</span>
<span class="gh">Out[19]: </span><span class="go">5</span>
<span class="gp">In [20]: </span><span class="n">d</span>
<span class="gh">Out[20]: </span><span class="go">{&#39;that&#39;: 7}</span>
</pre></div>
</div>
<p>pop out an arbitrary key, value pair</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [23]: </span><span class="n">d</span><span class="o">.</span><span class="n">popitem</span><span class="p">()</span>
<span class="gh">Out[23]: </span><span class="go">(&#39;that&#39;, 7)</span>
<span class="gp">In [24]: </span><span class="n">d</span>
<span class="gh">Out[24]: </span><span class="go">{}</span>
</pre></div>
</div>
</div>
<p><tt class="docutils literal"><span class="pre">setdefault(key[,</span> <span class="pre">default])</span></tt></p>
<p>gets the value if it&#8217;s there, sets it if it&#8217;s not</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [26]: </span><span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>

<span class="gp">In [27]: </span><span class="n">d</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s">u&#39;something&#39;</span><span class="p">,</span> <span class="s">u&#39;a value&#39;</span><span class="p">)</span>
<span class="gh">Out[27]: </span><span class="go">u&#39;a value&#39;</span>
<span class="gp">In [28]: </span><span class="n">d</span>
<span class="gh">Out[28]: </span><span class="go">{u&#39;something&#39;: u&#39;a value&#39;}</span>
<span class="gp">In [29]: </span><span class="n">d</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s">u&#39;something&#39;</span><span class="p">,</span> <span class="s">u&#39;a different value&#39;</span><span class="p">)</span>
<span class="gh">Out[29]: </span><span class="go">u&#39;a value&#39;</span>
<span class="gp">In [30]: </span><span class="n">d</span>
<span class="gh">Out[30]: </span><span class="go">{u&#39;something&#39;: u&#39;a value&#39;}</span>
</pre></div>
</div>
<p>dict View objects:</p>
<p>Like <tt class="docutils literal"><span class="pre">keys()</span></tt>, <tt class="docutils literal"><span class="pre">values()</span></tt>, <tt class="docutils literal"><span class="pre">items()</span></tt>, but maintain a link to the original dict</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [47]: </span><span class="n">d</span>
<span class="gh">Out[47]: </span><span class="go">{u&#39;something&#39;: u&#39;a value&#39;}</span>
<span class="gp">In [48]: </span><span class="n">item_view</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">viewitems</span><span class="p">()</span>
<span class="gp">In [49]: </span><span class="n">item_view</span>
<span class="gh">Out[49]: </span><span class="go">dict_items([(u&#39;something&#39;, u&#39;a value&#39;)])</span>
<span class="gp">In [50]: </span><span class="n">d</span><span class="p">[</span><span class="s">&#39;something else&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">u&#39;another value&#39;</span>

<span class="gp">In [51]: </span><span class="n">item_view</span>
<span class="gh">Out[51]: </span><span class="go">dict_items([(&#39;something else&#39;, u&#39;another value&#39;), (u&#39;something&#39;, u&#39;a value&#39;)])</span>
</pre></div>
</div>
</div>
<div class="section" id="sets">
<h2>Sets<a class="headerlink" href="#sets" title="Permalink to this headline">¶</a></h2>
<p>A <tt class="docutils literal"><span class="pre">set</span></tt>  is an unordered collection of distinct values</p>
<p>Essentially a dict with only keys</p>
<p>Set Constructors</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="nb">set</span><span class="p">()</span>
<span class="nb">set</span><span class="p">([])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nb">set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="nb">set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>
<span class="nb">set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">update</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span>
<span class="nb">set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="set-properties">
<h2>Set Properties<a class="headerlink" href="#set-properties" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">Set</span></tt>  members must be hashable</p>
<div class="build container">
<p>Like dictionary keys &#8211; and for same reason (efficient lookup)</p>
<p>No indexing (unordered)</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">TypeError</span><span class="p">:</span> <span class="s">&#39;set&#39;</span> <span class="nb">object</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">support</span> <span class="n">indexing</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="set-methods">
<h2>Set Methods<a class="headerlink" href="#set-methods" title="Permalink to this headline">¶</a></h2>
<div class="highlight-ipython"><div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="mi">1</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span> <span class="c"># an arbitrary member</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">KeyError</span><span class="p">:</span> <span class="s">&#39;pop from an empty set&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">s</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s">&quot;&lt;stdin&gt;&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">KeyError</span><span class="p">:</span> <span class="mi">2</span>
</pre></div>
</div>
<p>All the &#8220;set&#8221; operations from math class...</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">s</span><span class="o">.</span><span class="n">isdisjoint</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

<span class="n">s</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

<span class="n">s</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>

<span class="n">s</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>

<span class="n">s</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>

<span class="n">s</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span> <span class="n">other</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="frozen-set">
<h2>Frozen Set<a class="headerlink" href="#frozen-set" title="Permalink to this headline">¶</a></h2>
<p>Another kind of set: <tt class="docutils literal"><span class="pre">frozenset</span></tt></p>
<p>immutable &#8211; for use as a key in a dict
(or another set...)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">AttributeError</span>: <span class="n">&#39;frozenset&#39; object has no attribute &#39;add&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="exceptions">
<h1>Exceptions<a class="headerlink" href="#exceptions" title="Permalink to this headline">¶</a></h1>
<div class="left container">
<p>Another Branching structure:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">try</span><span class="p">:</span>
    <span class="n">do_something</span><span class="p">()</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;missing.txt&#39;</span><span class="p">)</span>
    <span class="n">process</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>   <span class="c"># never called if file missing</span>
<span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;couldn&#39;t open missing.txt&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h2>Exceptions<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>Never Do this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">try</span><span class="p">:</span>
    <span class="n">do_something</span><span class="p">()</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;missing.txt&#39;</span><span class="p">)</span>
    <span class="n">process</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>   <span class="c"># never called if file missing</span>
<span class="k">except</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;couldn&#39;t open missing.txt&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="id4">
<h2>Exceptions<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>Use Exceptions, rather than your own tests:</p>
<p>Don&#8217;t do this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">do_something</span><span class="p">()</span>
<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s">&#39;missing.txt&#39;</span><span class="p">):</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;missing.txt&#39;</span><span class="p">)</span>
    <span class="n">process</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>   <span class="c"># never called if file missing</span>
</pre></div>
</div>
<p>It will almost always work &#8211; but the almost will drive you crazy</p>
<p>Example from homework</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">if</span> <span class="n">num_in</span><span class="o">.</span><span class="n">isdigit</span><span class="p">():</span>
    <span class="n">num_in</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_in</span><span class="p">)</span>
</pre></div>
</div>
<p>but &#8211; <tt class="docutils literal"><span class="pre">int(num_in)</span></tt> will only work if the string can be converted to an integer.</p>
<p>So you can do</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">try</span><span class="p">:</span>
    <span class="n">num_in</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_in</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">u&quot;Input must be an integer, try again.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or let the Exception be raised....</p>
<div class="highlight-python"><div class="highlight"><pre>&quot;it&#39;s Easier to Ask Forgiveness than Permission&quot;

-- Grace Hopper
</pre></div>
</div>
<p><a class="reference external" href="http://www.youtube.com/watch?v=AZDWveIdqjY">http://www.youtube.com/watch?v=AZDWveIdqjY</a></p>
<p>(Pycon talk by Alex Martelli)</p>
<p>For simple scripts, let exceptions happen.</p>
<p>Only handle the exception if the code can and will do something about it.</p>
<p>(much better debugging info when an error does occur)</p>
</div>
<div class="section" id="exceptions-finally">
<h2>Exceptions &#8211; finally<a class="headerlink" href="#exceptions-finally" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="k">try</span><span class="p">:</span>
    <span class="n">do_something</span><span class="p">()</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;missing.txt&#39;</span><span class="p">)</span>
    <span class="n">process</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>   <span class="c"># never called if file missing</span>
<span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">u&quot;couldn&#39;t open missing.txt&quot;</span><span class="p">)</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">do_some_clean</span><span class="o">-</span><span class="n">up</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">finally:</span></tt>  clause will always run</p>
</div>
<div class="section" id="exceptions-else">
<h2>Exceptions &#8211; else<a class="headerlink" href="#exceptions-else" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="k">try</span><span class="p">:</span>
    <span class="n">do_something</span><span class="p">()</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;missing.txt&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">u&quot;couldn&#39;t open missing.txt&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">process</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="c"># only called if there was no exception</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Advantage:</dt>
<dd>you know where the Exception came from</dd>
</dl>
</div>
<div class="section" id="exceptions-using-them">
<h2>Exceptions &#8211; using them<a class="headerlink" href="#exceptions-using-them" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="k">try</span><span class="p">:</span>
    <span class="n">do_something</span><span class="p">()</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;missing.txt&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">IOError</span> <span class="k">as</span> <span class="n">the_error</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">the_error</span>
    <span class="n">the_error</span><span class="o">.</span><span class="n">extra_info</span> <span class="o">=</span> <span class="s">&quot;some more information&quot;</span>
    <span class="k">raise</span>
</pre></div>
</div>
<div class="build container">
<p>Particularly useful if you catch more than one exception:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">except</span> <span class="p">(</span><span class="ne">IOError</span><span class="p">,</span> <span class="n">BufferError</span><span class="p">,</span> <span class="ne">OSError</span><span class="p">)</span> <span class="k">as</span> <span class="n">the_error</span><span class="p">:</span>
    <span class="n">do_something_with</span> <span class="p">(</span><span class="n">the_error</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="raising-exceptions">
<h2>Raising Exceptions<a class="headerlink" href="#raising-exceptions" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">divide</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">b</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ZeroDivisionError</span><span class="p">(</span><span class="s">&quot;b can not be zero&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">a</span> <span class="o">/</span> <span class="n">b</span>
</pre></div>
</div>
<div class="build container">
<p>when you call it:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [515]: </span><span class="n">divide</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">ZeroDivisionError: b can not be zero</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="built-in-exceptions">
<h2>Built in Exceptions<a class="headerlink" href="#built-in-exceptions" title="Permalink to this headline">¶</a></h2>
<p>You can create your own custom exceptions, but...</p>
<div class="build container">
<div class="highlight-python"><div class="highlight"><pre><span class="n">exp</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">__builtin__</span><span class="p">)</span> <span class="k">if</span> <span class="s">&quot;Error&quot;</span> <span class="ow">in</span> <span class="n">name</span><span class="p">]</span>
<span class="nb">len</span><span class="p">(</span><span class="n">exp</span><span class="p">)</span>
<span class="mi">32</span>
</pre></div>
</div>
<p>For the most part, you can/should use a built in one</p>
</div>
<p>Choose the best match you can for the built in Exception you raise.</p>
<div class="build container">
<p>Example (for last week&#8217;s ackerman homework):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="nb">int</span><span class="p">))</span> <span class="ow">or</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
    <span class="k">raise</span> <span class="ne">ValueError</span>
</pre></div>
</div>
<p>Is the <em>value</em> of the input the problem here?</p>
<p>Nope: the <em>type</em> is the problem:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="nb">int</span><span class="p">))</span> <span class="ow">or</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
    <span class="k">raise</span> <span class="ne">TypeError</span>
</pre></div>
</div>
<p>but should you be checking type anyway? (EAFP)</p>
</div>
</div>
</div>
<div class="section" id="file-reading-and-writing">
<h1>File Reading and Writing<a class="headerlink" href="#file-reading-and-writing" title="Permalink to this headline">¶</a></h1>
<div class="section" id="files">
<h2>Files<a class="headerlink" href="#files" title="Permalink to this headline">¶</a></h2>
<p>Text Files</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;secrets.txt&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">)</span>
<span class="n">secret_data</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">secret_data</span></tt> is a (unicode) string</p>
<p><tt class="docutils literal"><span class="pre">encoding</span></tt> defaults to <tt class="docutils literal"><span class="pre">sys.getdefaultencoding()</span></tt> &#8211; often NOT what you
want.</p>
<p>Binary Files</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;secrets.bin&#39;</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span>
<span class="n">secret_data</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">secret_data</span></tt>  is a byte string</p>
<p>(with arbitrary bytes in it &#8211; well, not arbitrary &#8211; whatever is in the file.)</p>
<p>(See the <tt class="docutils literal"><span class="pre">struct</span></tt>  module to unpack formatted binary data)</p>
<p>File Opening Modes</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;secrets.txt&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">mode</span><span class="p">])</span>
<span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span>
<span class="s">&#39;rb&#39;</span><span class="p">,</span> <span class="s">&#39;wb&#39;</span><span class="p">,</span> <span class="s">&#39;ab&#39;</span>
<span class="n">r</span><span class="o">+</span><span class="p">,</span> <span class="n">w</span><span class="o">+</span><span class="p">,</span> <span class="n">a</span><span class="o">+</span>
<span class="n">r</span><span class="o">+</span><span class="n">b</span><span class="p">,</span> <span class="n">w</span><span class="o">+</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>
<span class="n">U</span>
<span class="n">U</span><span class="o">+</span>
</pre></div>
</div>
<p>These follow the Unix conventions, and aren&#8217;t all that well documented on the
Python docs. But these BSD docs make it pretty clear:</p>
<p><a class="reference external" href="http://www.manpagez.com/man/3/fopen/">http://www.manpagez.com/man/3/fopen/</a></p>
<p><strong>Gotcha</strong> &#8211; &#8216;w&#8217; modes always clear the file</p>
<p>Text is default</p>
<ul class="simple">
<li>Newlines are translated: <tt class="docutils literal"><span class="pre">\r\n</span> <span class="pre">-&gt;</span> <span class="pre">\n</span></tt></li>
<li>&#8211; reading and writing!</li>
<li>Use *nix-style in your code: <tt class="docutils literal"><span class="pre">\n</span></tt></li>
<li><tt class="docutils literal"><span class="pre">io.open()</span></tt> returns various &#8220;stream&#8221; objects &#8211; but they act like file
objects.</li>
<li>In text mode, open() defaults to &#8220;Universal&#8221; newline mode.</li>
</ul>
<p>Gotcha:</p>
<ul class="simple">
<li>no difference between text and binary on *nix</li>
<li>breaks on Windows</li>
</ul>
<p><tt class="docutils literal"><span class="pre">open(file,</span> <span class="pre">mode='r',</span> <span class="pre">buffering=-1,</span> <span class="pre">encoding=None,</span> <span class="pre">errors=None,</span> <span class="pre">newline=None,</span> <span class="pre">closefd=True)</span></tt></p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">file</span></tt> is generally a file name or full path</li>
<li><tt class="docutils literal"><span class="pre">mode</span></tt> is the mode for opening: &#8216;r&#8217;, &#8216;w&#8217;, etc.</li>
<li><tt class="docutils literal"><span class="pre">buffering</span></tt> controls the buffering mode (0 for no buffering)</li>
<li><tt class="docutils literal"><span class="pre">encoding</span></tt> sets the unicode encoding &#8211; only for text files &#8211; when set,
you can ONLY write unicode object to the file.</li>
<li><tt class="docutils literal"><span class="pre">errors</span></tt> sets the encoding error mode: &#8216;strict&#8217;, &#8216;ignore&#8217;, &#8216;replace&#8217;,...</li>
<li><tt class="docutils literal"><span class="pre">newline</span></tt> controls Universal Newline mode: lets you write DOS-type files on
*nix, for instance (text mode only).</li>
<li><tt class="docutils literal"><span class="pre">closedfd</span></tt> controls close()  behavior if a file descriptor, rather than a
name is passed in (advanced usage!)</li>
</ul>
<p>(<a class="reference external" href="https://docs.python.org/2/library/io.html?highlight=io.open#io.open">https://docs.python.org/2/library/io.html?highlight=io.open#io.open</a>)</p>
</div>
<div class="section" id="file-reading">
<h2>File Reading<a class="headerlink" href="#file-reading" title="Permalink to this headline">¶</a></h2>
<p>Reading part of a file</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">header_size</span> <span class="o">=</span> <span class="mi">4096</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;secrets.txt&#39;</span><span class="p">)</span>
<span class="n">secret_header</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">header_size</span><span class="p">)</span>
<span class="n">secret_rest</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>Common Idioms</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;secrets.txt&#39;</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">line</span>
</pre></div>
</div>
<div class="build container">
<p>(the file object is an iterator!)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">f</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s">&#39;secrets.txt&#39;</span><span class="p">)</span>
<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="p">:</span>
        <span class="k">break</span>
    <span class="n">do_something_with_line</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="file-writing">
<h2>File Writing<a class="headerlink" href="#file-writing" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="n">outfile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;output.txt&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;this is line: </span><span class="si">%i</span><span class="se">\n</span><span class="s">&quot;</span><span class="o">%</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="file-methods">
<h2>File Methods<a class="headerlink" href="#file-methods" title="Permalink to this headline">¶</a></h2>
<p>Commonly Used Methods</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span> <span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>

<span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span> <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="n">seq</span><span class="p">)</span>

<span class="n">f</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span> <span class="n">f</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span>

<span class="n">f</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>

<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="trigram-puzzle">
<h1>Trigram Puzzle<a class="headerlink" href="#trigram-puzzle" title="Permalink to this headline">¶</a></h1>
</div>
<div class="left section" id="id5">
<h1>Today&#8217;s Puzzle: Trigrams<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h1>
<p>N-grams are a way to study word associations</p>
<p><a class="reference external" href="https://books.google.com/ngrams">https://books.google.com/ngrams</a></p>
<ul>
<li><p class="first">Our task today: read in the words from a large text file,
create a dictionary of trigrams.</p>
</li>
<li><p class="first">Write pseudo code and create a design.</p>
</li>
<li><dl class="first docutils">
<dt>Use dictionaries, exceptions, file reading/writing.</dt>
<dd><ul class="build first last simple">
<li>Dictionaries</li>
<li>Exceptions</li>
<li>Files, etc.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="homework-for-next-time">
<h1>Homework for Next Time<a class="headerlink" href="#homework-for-next-time" title="Permalink to this headline">¶</a></h1>
<p>HW 12 : Update Mailroom Madness with dicts and files
HW 13 : Trigrams</p>
<div class="section" id="id6">
<h2>Homework Review<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<p>Homework Questions?</p>
<p>Solutions to the dict/set lab, and some others in the class repo in:
<tt class="docutils literal"><span class="pre">Solutions</span></tt></p>
<p>A few tidbits:</p>
<p>The <tt class="docutils literal"><span class="pre">dict</span></tt> isn&#8217;t sorted, so what if you want to do something in a sorted way?</p>
<div class="build container">
<p>The &#8220;old&#8221; way:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">keys</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="n">keys</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">collections</span><span class="o">.</span><span class="n">OrderedDict</span>
<span class="nb">sorted</span><span class="p">()</span>
</pre></div>
</div>
<p>(demo)</p>
</div>
</div>
</div>
<div class="section" id="advanced-argument-passing">
<h1>Advanced Argument Passing<a class="headerlink" href="#advanced-argument-passing" title="Permalink to this headline">¶</a></h1>
<div class="section" id="keyword-arguments">
<h2>Keyword arguments<a class="headerlink" href="#keyword-arguments" title="Permalink to this headline">¶</a></h2>
<p>When defining a function, you can specify only what you need &#8211; in any order</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [150]: </span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>
<span class="gp">In [151]: </span><span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="gp">   .....: </span>    <span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s">&quot; &quot;</span><span class="p">)</span>
<span class="gp">   .....:</span>
<span class="gp">In [152]: </span><span class="n">fun</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">1 2 3</span>
<span class="gp">In [153]: </span><span class="n">fun</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="go">1 0 3</span>
<span class="gp">In [154]: </span><span class="n">fun</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">1 2 3</span>
</pre></div>
</div>
<p>A Common Idiom:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">do_something_different</span>
    <span class="n">go_on_here</span>
</pre></div>
</div>
<p>Can set defaults to variables</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [156]: </span><span class="n">y</span> <span class="o">=</span> <span class="mi">4</span>
<span class="gp">In [157]: </span><span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">y</span><span class="p">):</span>
<span class="go">    print(u&quot;x is: %s&quot; % x)</span>
<span class="gp">   .....:</span>
<span class="gp">In [158]: </span><span class="n">fun</span><span class="p">()</span>
<span class="go">x is: 4</span>
</pre></div>
</div>
<p>Defaults are evaluated when the function is defined</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [156]: </span><span class="n">y</span> <span class="o">=</span> <span class="mi">4</span>
<span class="gp">In [157]: </span><span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">y</span><span class="p">):</span>
<span class="go">    print(u&quot;x is: %s&quot; % x)</span>
<span class="gp">   .....:</span>
<span class="gp">In [158]: </span><span class="n">fun</span><span class="p">()</span>
<span class="go">x is: 4</span>
<span class="gp">In [159]: </span><span class="n">y</span> <span class="o">=</span> <span class="mi">6</span>
<span class="gp">In [160]: </span><span class="n">fun</span><span class="p">()</span>
<span class="go">x is: 4</span>
</pre></div>
</div>
</div>
<div class="section" id="function-arguments-in-variables">
<h2>Function arguments in variables<a class="headerlink" href="#function-arguments-in-variables" title="Permalink to this headline">¶</a></h2>
<p>function arguments are really just:</p>
<div class="build container">
<ul class="simple">
<li>a tuple (positional arguments)</li>
<li>a dict (keyword arguments)</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
   <span class="o">...</span><span class="p">:</span>     <span class="n">msg</span> <span class="o">=</span> <span class="s">u&quot;position: </span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s"> -- shape: </span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">&quot;</span>
   <span class="o">...</span><span class="p">:</span>     <span class="k">print</span><span class="p">(</span><span class="n">msg</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">))</span>
   <span class="o">...</span><span class="p">:</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">position</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">size</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;h&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">}</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">size</span><span class="p">)</span>
<span class="n">position</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span> <span class="o">--</span> <span class="n">shape</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="function-parameters-in-variables">
<h2>Function parameters in variables<a class="headerlink" href="#function-parameters-in-variables" title="Permalink to this headline">¶</a></h2>
<p>You can also pull the parameters out in the function as a tuple and a dict:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [10]: </span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="gp">   ....: </span>    <span class="k">print</span><span class="p">(</span><span class="s">u&quot;the positional arguments are: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="nb">unicode</span><span class="p">(</span><span class="n">args</span><span class="p">))</span>
<span class="gp">   ....: </span>    <span class="k">print</span><span class="p">(</span><span class="s">u&quot;the optional arguments are: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="nb">unicode</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
<span class="gp">   ....:</span>
<span class="gp">In [11]: </span><span class="n">f</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">this</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">that</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
<span class="go">the positional arguments are: (2, 3)</span>
<span class="go">the optional arguments are: {&#39;this&#39;: 5, &#39;that&#39;: 7}</span>
</pre></div>
</div>
</div>
<div class="section" id="passing-a-dict-to-the-string-format-method">
<h2>Passing a dict to the <tt class="docutils literal"><span class="pre">string.format()</span></tt> method<a class="headerlink" href="#passing-a-dict-to-the-string-format-method" title="Permalink to this headline">¶</a></h2>
<p>Now that you know that keyword args are really a dict, you can do this nifty
trick:</p>
<div class="build container">
<div class="container">
<p>The <tt class="docutils literal"><span class="pre">format</span></tt> method takes keyword arguments:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [24]: </span><span class="s">u&quot;My name is {first} {last}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">last</span><span class="o">=</span><span class="s">u&quot;Ewing&quot;</span><span class="p">,</span> <span class="n">first</span><span class="o">=</span><span class="s">u&quot;Cris&quot;</span><span class="p">)</span>
<span class="gh">Out[24]: </span><span class="go">u&#39;My name is Cris Ewing&#39;</span>
</pre></div>
</div>
</div>
<div class="container">
<p>Build a dict of the keys and values:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [25]: </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s">u&quot;last&quot;</span><span class="p">:</span> <span class="s">u&quot;Ewing&quot;</span><span class="p">,</span> <span class="s">u&quot;first&quot;</span><span class="p">:</span> <span class="s">u&quot;Cris&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="container">
<p>And pass to <tt class="docutils literal"><span class="pre">format()``with</span> <span class="pre">``**</span></tt></p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [26]: </span><span class="s">u&quot;My name is {first} {last}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">d</span><span class="p">)</span>
<span class="gh">Out[26]: </span><span class="go">u&#39;My name is Paul Pham&#39;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="lab">
<h2>LAB<a class="headerlink" href="#lab" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s do this right now:</p>
<div class="build container">
<p>keyword arguments</p>
<ul class="build simple">
<li>Write a function that has four optional parameters (with defaults):<ul>
<li>foreground_color</li>
<li>background_color</li>
<li>link_color</li>
<li>visited_link_color</li>
</ul>
</li>
<li>Have it print the colors (use strings for the colors)</li>
<li>Call it with a couple different parameters set</li>
<li>Have it pull the parameters out with <tt class="docutils literal"><span class="pre">*args,</span> <span class="pre">**kwargs</span></tt></li>
</ul>
</div>
</div>
</div>
<div class="section" id="a-bit-more-on-mutability-and-copies">
<h1>A bit more on mutability (and copies)<a class="headerlink" href="#a-bit-more-on-mutability-and-copies" title="Permalink to this headline">¶</a></h1>
<p class="left">We&#8217;ve talked about this: mutable objects can have their contents changed in
place.</p>
<div class="left build container">
<p>Immutable objects can not.</p>
<p>This has implications when you have a container with mutable objects in it:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [28]: </span><span class="n">list1</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">]</span> <span class="p">]</span>
</pre></div>
</div>
<p>one way to make a copy of a list:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [29]: </span><span class="n">list2</span> <span class="o">=</span> <span class="n">list1</span><span class="p">[:]</span>
<span class="gp">In [30]: </span><span class="n">list2</span> <span class="ow">is</span> <span class="n">list1</span>
<span class="gh">Out[30]: </span><span class="go">False</span>
</pre></div>
</div>
<p>they are different lists.</p>
</div>
<div class="section" id="mutable-objects">
<h2>mutable objects<a class="headerlink" href="#mutable-objects" title="Permalink to this headline">¶</a></h2>
<p>What if we set an element to a new value?</p>
<div class="build container">
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [31]: </span><span class="n">list1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">]</span>

<span class="gp">In [32]: </span><span class="n">list1</span>
<span class="gh">Out[32]: </span><span class="go">[[5, 6, 7], [&#39;a&#39;, &#39;b&#39;]]</span>

<span class="gp">In [33]: </span><span class="n">list2</span>
<span class="gh">Out[33]: </span><span class="go">[[1, 2, 3], [&#39;a&#39;, &#39;b&#39;]]</span>
</pre></div>
</div>
<p>So they are independent.</p>
</div>
<p>But what if we mutate an element?</p>
<div class="build container">
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [34]: </span><span class="n">list1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">)</span>

<span class="gp">In [35]: </span><span class="n">list1</span>
<span class="gh">Out[35]: </span><span class="go">[[5, 6, 7], [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]]</span>

<span class="gp">In [36]: </span><span class="n">list2</span>
<span class="gh">Out[36]: </span><span class="go">[[1, 2, 3], [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]]</span>
</pre></div>
</div>
<p>uh oh! mutating an element in one list mutated the one in the other list.</p>
</div>
<p>Why is that?</p>
<div class="build container">
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [38]: </span><span class="n">list1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="n">list2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="gh">Out[38]: </span><span class="go">True</span>
</pre></div>
</div>
<p>The elements are the same object!</p>
<p>This is known as a &#8220;shallow&#8221; copy &#8211; Python doesn&#8217;t want to copy more than
it needs to, so in this case, it makes a new list, but does not make copies
of the contents.</p>
<p>Same for dicts (and any container type)</p>
<p>If the elements are immutable, it doesn&#8217;t really make a differnce &#8211; but be
very careful with mutable elements.</p>
</div>
</div>
<div class="section" id="the-copy-module">
<h2>The copy module<a class="headerlink" href="#the-copy-module" title="Permalink to this headline">¶</a></h2>
<p>most objects have a way to make copies (<tt class="docutils literal"><span class="pre">dict.copy()</span></tt> for instance).</p>
<div class="build container">
<p>but if not, you can use the <tt class="docutils literal"><span class="pre">copy</span></tt> module to make a copy:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [39]: </span><span class="kn">import</span> <span class="nn">copy</span>

<span class="gp">In [40]: </span><span class="n">list3</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">list2</span><span class="p">)</span>

<span class="gp">In [41]: </span><span class="n">list3</span>
<span class="gh">Out[41]: </span><span class="go">[[1, 2, 3], [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]]</span>
</pre></div>
</div>
<p>This is <em>also</em> a shallow copy.</p>
</div>
<p>But there is another option:</p>
<div class="build container">
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [3]: </span><span class="n">list1</span>
<span class="gh">Out[3]: </span><span class="go">[[1, 2, 3], [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]]</span>

<span class="gp">In [4]: </span><span class="n">list2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">list1</span><span class="p">)</span>

<span class="gp">In [5]: </span><span class="n">list1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>

<span class="gp">In [6]: </span><span class="n">list1</span>
<span class="gh">Out[6]: </span><span class="go">[[1, 2, 3, 4], [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]]</span>

<span class="gp">In [7]: </span><span class="n">list2</span>
<span class="gh">Out[7]: </span><span class="go">[[1, 2, 3], [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]]</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">deepcopy</span></tt> recurses through the object, making copies of everything as it goes.</p>
</div>
<p>I happened on this thread on stack overflow:</p>
<p><a class="reference external" href="http://stackoverflow.com/questions/3975376/understanding-dict-copy-shallow-or-deep">http://stackoverflow.com/questions/3975376/understanding-dict-copy-shallow-or-deep</a></p>
<div class="build container">
<p>The OP is pretty confused &#8211; can you sort it out?</p>
<p>Make sure you understand the difference between a reference, a shallow
copy, and a deep copy.</p>
</div>
</div>
<div class="section" id="mutables-as-default-arguments">
<h2>Mutables as default arguments:<a class="headerlink" href="#mutables-as-default-arguments" title="Permalink to this headline">¶</a></h2>
<p>Another &#8220;gotcha&#8221; is using mutables as default arguments:</p>
<div class="build container">
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [11]: </span><span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="p">[]):</span>
<span class="gp">   ....: </span>    <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="gp">   ....: </span>    <span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">   ....:</span>
</pre></div>
</div>
<p>This makes sense: maybe you&#8217;d pass in a list, but the default is an empty list.</p>
<div class="container">
<p>But:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [12]: </span><span class="n">fun</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">[3]</span>

<span class="gp">In [13]: </span><span class="n">fun</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="go">[3, 4]</span>
</pre></div>
</div>
</div>
<p>Huh?!</p>
</div>
<p>Remember:</p>
<ul class="build simple">
<li>the default argument is defined when the function is created</li>
<li>there will be <em>only one list</em></li>
<li>every time the function is called, the <em>same one list</em> is used.</li>
</ul>
<div class="build container">
<p>The standard practice for such a mutable default argument:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [15]: </span><span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
<span class="gp">   ....: </span>    <span class="k">if</span> <span class="n">a</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
<span class="gp">   ....: </span>        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">   ....: </span>    <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="gp">   ....: </span>    <span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">In [16]: </span><span class="n">fun</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">[3]</span>
<span class="gp">In [17]: </span><span class="n">fun</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="go">[4]</span>
</pre></div>
</div>
<p>You get a new list every time the function is called</p>
</div>
</div>
</div>
<div class="section" id="list-and-dict-comprehensions">
<h1>List and Dict Comprehensions<a class="headerlink" href="#list-and-dict-comprehensions" title="Permalink to this headline">¶</a></h1>
<div class="left container">
<p>A bit of functional programming</p>
<div class="build container">
<p>consider this common <tt class="docutils literal"><span class="pre">for</span></tt> loop structure:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">new_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">variable</span> <span class="ow">in</span> <span class="n">a_list</span><span class="p">:</span>
    <span class="n">new_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">expression</span><span class="p">)</span>
</pre></div>
</div>
<p>This can be expressed with a single line using a &#8220;list comprehension&#8221;</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">new_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">expression</span> <span class="k">for</span> <span class="n">variable</span> <span class="ow">in</span> <span class="n">a_list</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="list-comprehensions">
<h2>List Comprehensions<a class="headerlink" href="#list-comprehensions" title="Permalink to this headline">¶</a></h2>
<p>What about nested for loops?</p>
<div class="build container">
<div class="highlight-python"><div class="highlight"><pre><span class="n">new_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">a_list</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">var2</span> <span class="ow">in</span> <span class="n">a_list2</span><span class="p">:</span>
        <span class="n">new_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">expression</span><span class="p">)</span>
</pre></div>
</div>
<p>Can also be expressed in one line:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">new_list</span> <span class="o">=</span>  <span class="p">[</span><span class="n">exp</span> <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">a_list</span> <span class="k">for</span> <span class="n">var2</span> <span class="ow">in</span> <span class="n">a_list2</span><span class="p">]</span>
</pre></div>
</div>
<p>You get the &#8220;outer product&#8221;, i.e. all combinations.</p>
<p>(demo)</p>
</div>
<p>But usually you at least have a conditional in the loop:</p>
<div class="build container">
<div class="highlight-python"><div class="highlight"><pre><span class="n">new_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">variable</span> <span class="ow">in</span> <span class="n">a_list</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">something_is_true</span><span class="p">:</span>
        <span class="n">new_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">expression</span><span class="p">)</span>
</pre></div>
</div>
<p>You can add a conditional to the comprehension:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">new_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">expr</span> <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">a_list</span> <span class="k">if</span> <span class="n">something_is_true</span><span class="p">]</span>
</pre></div>
</div>
<p>(demo)</p>
</div>
<p>Examples:</p>
<div class="build container">
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [341]: </span><span class="p">[</span><span class="n">x</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>
<span class="gh">Out[341]: </span><span class="go">[0, 1, 4]</span>

<span class="gp">In [342]: </span><span class="p">[</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">)]</span>
<span class="gh">Out[342]: </span><span class="go">[5, 6, 6, 7, 7, 8]</span>

<span class="gp">In [343]: </span><span class="p">[</span><span class="n">x</span> <span class="o">*</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span><span class="p">]</span>
<span class="gh">Out[343]: </span><span class="go">[0, 4, 8]</span>
</pre></div>
</div>
<p>Remember this from last week?</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">name</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">__builtin__</span><span class="p">)</span> <span class="k">if</span> <span class="s">&quot;Error&quot;</span> <span class="ow">in</span> <span class="n">name</span><span class="p">]</span>
<span class="p">[</span><span class="s">&#39;ArithmeticError&#39;</span><span class="p">,</span>
 <span class="s">&#39;AssertionError&#39;</span><span class="p">,</span>
 <span class="s">&#39;AttributeError&#39;</span><span class="p">,</span>
 <span class="o">....</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="set-comprehensions">
<h2>Set Comprehensions<a class="headerlink" href="#set-comprehensions" title="Permalink to this headline">¶</a></h2>
<p>You can do it with sets, too:</p>
<div class="build container">
<div class="highlight-python"><div class="highlight"><pre><span class="n">new_set</span> <span class="o">=</span> <span class="p">{</span><span class="n">value</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">a_sequence</span><span class="p">}</span>
</pre></div>
</div>
<p>the same as this <tt class="docutils literal"><span class="pre">for</span></tt> loop:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">new_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">a_sequence</span><span class="p">:</span>
    <span class="n">new_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Example: finding all the vowels in a string...</p>
<div class="build container">
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [19]: </span><span class="n">s</span> <span class="o">=</span> <span class="s">&quot;a not very long string&quot;</span>

<span class="gp">In [20]: </span><span class="n">vowels</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="s">&#39;aeiou&#39;</span><span class="p">)</span>

<span class="gp">In [21]: </span><span class="p">{</span> <span class="n">let</span> <span class="k">for</span> <span class="n">let</span> <span class="ow">in</span> <span class="n">s</span> <span class="k">if</span> <span class="n">let</span> <span class="ow">in</span> <span class="n">vowels</span> <span class="p">}</span>
<span class="gh">Out[21]: </span><span class="go">{&#39;a&#39;, &#39;e&#39;, &#39;i&#39;, &#39;o&#39;}</span>
</pre></div>
</div>
<p>Side note: why did I do <tt class="docutils literal"><span class="pre">set('aeiou')</span></tt> rather than just <cite>aeiou</cite>?</p>
</div>
</div>
<div class="section" id="dict-comprehensions">
<h2>Dict Comprehensions<a class="headerlink" href="#dict-comprehensions" title="Permalink to this headline">¶</a></h2>
<p>Also with dictionaries</p>
<div class="build container">
<div class="highlight-python"><div class="highlight"><pre><span class="n">new_dict</span> <span class="o">=</span> <span class="p">{</span> <span class="n">key</span><span class="p">:</span><span class="n">value</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">a_sequence</span><span class="p">}</span>
</pre></div>
</div>
<p>the same as this <tt class="docutils literal"><span class="pre">for</span></tt> loop:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">new_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">a_sequence</span><span class="p">:</span>
    <span class="n">new_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</pre></div>
</div>
</div>
<p>Example</p>
<div class="build container">
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [22]: </span><span class="p">{</span><span class="n">i</span><span class="p">:</span> <span class="s">&quot;this_</span><span class="si">%i</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)}</span>
<span class="gh">Out[22]: </span><span class="go">{0: &#39;this_0&#39;, 1: &#39;this_1&#39;, 2: &#39;this_2&#39;,</span>
<span class="go">          3: &#39;this_3&#39;, 4: &#39;this_4&#39;}</span>
</pre></div>
</div>
<p>Can you do the same thing with the <tt class="docutils literal"><span class="pre">dict()</span></tt> constructor?</p>
</div>
</div>
<div class="section" id="recommended-reading">
<h2>Recommended Reading<a class="headerlink" href="#recommended-reading" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>LPTHW: Ex 40 - 45</li>
</ul>
<p><a class="reference external" href="http://learnpythonthehardway.org/book/">http://learnpythonthehardway.org/book/</a></p>
<ul class="simple">
<li>Dive Into Python: chapter 4, 5</li>
</ul>
<p><a class="reference external" href="http://www.diveintopython.net/toc/index.html">http://www.diveintopython.net/toc/index.html</a></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Homework Review</a></li>
<li><a class="reference internal" href="#today-s-puzzle-trigrams">Today&#8217;s Puzzle: Trigrams</a></li>
<li><a class="reference internal" href="#id1">Today&#8217;s Puzzle: Trigrams</a></li>
<li><a class="reference internal" href="#dictionaries-and-sets">Dictionaries and Sets</a><ul>
<li><a class="reference internal" href="#dictionary">Dictionary</a></li>
<li><a class="reference internal" href="#dictionary-constructors">Dictionary Constructors</a></li>
<li><a class="reference internal" href="#dictionary-indexing">Dictionary Indexing</a></li>
<li><a class="reference internal" href="#dictionary-ordering-not">Dictionary Ordering (not)</a></li>
<li><a class="reference internal" href="#dictionary-iterating">Dictionary Iterating</a></li>
<li><a class="reference internal" href="#dict-keys-and-values">dict keys and values</a></li>
<li><a class="reference internal" href="#id2">dict keys and values</a></li>
<li><a class="reference internal" href="#dictionary-performance">Dictionary Performance</a></li>
<li><a class="reference internal" href="#other-dict-operations">Other dict operations:</a></li>
<li><a class="reference internal" href="#sets">Sets</a></li>
<li><a class="reference internal" href="#set-properties">Set Properties</a></li>
<li><a class="reference internal" href="#set-methods">Set Methods</a></li>
<li><a class="reference internal" href="#frozen-set">Frozen Set</a></li>
</ul>
</li>
<li><a class="reference internal" href="#exceptions">Exceptions</a><ul>
<li><a class="reference internal" href="#id3">Exceptions</a></li>
<li><a class="reference internal" href="#id4">Exceptions</a></li>
<li><a class="reference internal" href="#exceptions-finally">Exceptions &#8211; finally</a></li>
<li><a class="reference internal" href="#exceptions-else">Exceptions &#8211; else</a></li>
<li><a class="reference internal" href="#exceptions-using-them">Exceptions &#8211; using them</a></li>
<li><a class="reference internal" href="#raising-exceptions">Raising Exceptions</a></li>
<li><a class="reference internal" href="#built-in-exceptions">Built in Exceptions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#file-reading-and-writing">File Reading and Writing</a><ul>
<li><a class="reference internal" href="#files">Files</a></li>
<li><a class="reference internal" href="#file-reading">File Reading</a></li>
<li><a class="reference internal" href="#file-writing">File Writing</a></li>
<li><a class="reference internal" href="#file-methods">File Methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#trigram-puzzle">Trigram Puzzle</a></li>
<li><a class="reference internal" href="#id5">Today&#8217;s Puzzle: Trigrams</a></li>
<li><a class="reference internal" href="#homework-for-next-time">Homework for Next Time</a><ul>
<li><a class="reference internal" href="#id6">Homework Review</a></li>
</ul>
</li>
<li><a class="reference internal" href="#advanced-argument-passing">Advanced Argument Passing</a><ul>
<li><a class="reference internal" href="#keyword-arguments">Keyword arguments</a></li>
<li><a class="reference internal" href="#function-arguments-in-variables">Function arguments in variables</a></li>
<li><a class="reference internal" href="#function-parameters-in-variables">Function parameters in variables</a></li>
<li><a class="reference internal" href="#passing-a-dict-to-the-string-format-method">Passing a dict to the <tt class="docutils literal"><span class="pre">string.format()</span></tt> method</a></li>
<li><a class="reference internal" href="#lab">LAB</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a-bit-more-on-mutability-and-copies">A bit more on mutability (and copies)</a><ul>
<li><a class="reference internal" href="#mutable-objects">mutable objects</a></li>
<li><a class="reference internal" href="#the-copy-module">The copy module</a></li>
<li><a class="reference internal" href="#mutables-as-default-arguments">Mutables as default arguments:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#list-and-dict-comprehensions">List and Dict Comprehensions</a><ul>
<li><a class="reference internal" href="#list-comprehensions">List Comprehensions</a></li>
<li><a class="reference internal" href="#set-comprehensions">Set Comprehensions</a></li>
<li><a class="reference internal" href="#dict-comprehensions">Dict Comprehensions</a></li>
<li><a class="reference internal" href="#recommended-reading">Recommended Reading</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="session04.html"
                        title="previous chapter">Session Four: Sequences, While Loops, Strings, Input</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="session06.html"
                        title="next chapter">Session Six (Tentative): Intro to Object Oriented Programming</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="session06.html" title="Session Six (Tentative): Intro to Object Oriented Programming"
             >next</a> |</li>
        <li class="right" >
          <a href="session04.html" title="Session Four: Sequences, While Loops, Strings, Input"
             >previous</a> |</li>
        <li><a href="index.html">F2 Python</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Christopher Barker, Cris Ewing.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>